import{u as F,a as A,r as m,j as e,L as _,F as B,c as S,d as M,e as R,f as U,g as H,h as W,i as q,k as J,l as K,y as L,m as O,G as Q,n as X}from"./index-CDtZe3id.js";import{C as i}from"./CustomButton-BHk0TsfB.js";import{c as G}from"./courseService-BSeO5xSq.js";import{d as $}from"./documentationService-D56WLKkg.js";import{f as V}from"./forumService-DfOgb0S1.js";import{c as z}from"./conferenceService-Bcx88bEU.js";import{u as Y}from"./userService-BeE_nVnS.js";import{c as T}from"./commentService-pSMtB1uE.js";import{e as Z}from"./enrollmentService-C8-aA4rY.js";const ee=()=>{const r=F(),{user:n,loading:o}=A(),[s,h]=m.useState(null),[y,x]=m.useState(!0),[u,p]=m.useState(null);return m.useEffect(()=>{(async()=>{if(o||!n){x(!1);return}try{x(!0);const c=await G.getCourses(),b=await $.getAll(),j=await V.getForumPosts(),f=await z.getConferences(),v=await Y.getUsers(),k=c.filter(d=>!d.isPublished),C=b.filter(d=>!d.isPublished),w=j.filter(d=>!d.isApproved),g=(await T.getComments()).filter(d=>!d.isApproved),D=f.filter(d=>!d.isApproved),N={totalUsers:v.length,totalCourses:c.length,totalDocuments:b.length,totalForumPosts:j.length,totalConferences:f.length,pendingCourses:k,pendingDocs:C,pendingForumPosts:w,commentsNeedingApproval:g,pendingConferences:D};h(N),p(null)}catch(c){console.error("Error fetching admin dashboard data:",c),p("Could not load dashboard data. Please try again later."),L.error("Error loading dashboard data.")}finally{x(!1)}})()},[o,n]),o||y?e.jsxs("div",{className:"pt-20 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:[e.jsx(_,{}),e.jsx("p",{className:"mt-4",children:"Cargando datos del dashboard..."})]}):u?e.jsxs("div",{className:"pt-20 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-lg",children:u})]}):e.jsx("div",{className:"mt-24 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-2xl text-center sm:text-3xl font-bold mb-6",children:"Dashboard de Administrador"}),s&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"Resumen General"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-800 p-4 sm:p-6 rounded-lg shadow-md border border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-800 dark:text-blue-100 mb-2",children:"Total Usuarios"}),e.jsx(B,{className:"text-3xl text-blue-500 dark:text-blue-300"})]}),e.jsx("p",{className:"text-center text-3xl sm:text-4xl font-bold text-blue-900 dark:text-blue-200",children:s.totalUsers})]}),e.jsxs("div",{className:"bg-green-100 dark:bg-green-800 p-4 sm:p-6 rounded-lg shadow-md border border-green-200 dark:border-green-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-800 dark:text-green-100 mb-2",children:"Total Cursos"}),e.jsx(S,{className:"text-3xl text-green-500 dark:text-green-300"})]}),e.jsx("p",{className:"text-center text-3xl sm:text-4xl font-bold text-green-900 dark:text-green-200",children:s.totalCourses})]}),e.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-800 p-4 sm:p-6 rounded-lg shadow-md border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-yellow-800 dark:text-yellow-100 mb-2",children:"Total Documentos"}),e.jsx(M,{className:"text-3xl text-yellow-500 dark:text-yellow-300"})]}),e.jsx("p",{className:"text-center text-3xl sm:text-4xl font-bold text-yellow-900 dark:text-yellow-200",children:s.totalDocuments})]}),e.jsxs("div",{className:"bg-purple-100 dark:bg-purple-800 p-4 sm:p-6 rounded-lg shadow-md border border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-800 dark:text-purple-100 mb-2",children:"Total Foros"}),e.jsx(R,{className:"text-3xl text-purple-500 dark:text-purple-300"})]}),e.jsx("p",{className:"text-center text-3xl sm:text-4xl font-bold text-purple-900 dark:text-purple-200",children:s.totalForumPosts})]}),e.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-800 p-4 sm:p-6 rounded-lg shadow-md border border-indigo-200 dark:border-indigo-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-indigo-800 dark:text-indigo-100 mb-2",children:"Total Congresos"}),e.jsx(U,{className:"text-3xl text-indigo-500 dark:text-indigo-300"})]}),e.jsx("p",{className:"text-center text-3xl sm:text-4xl font-bold text-indigo-900 dark:text-indigo-200",children:s.totalConferences})]})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary mt-8",children:"Contenido Pendiente de Aprobación"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.pendingCourses.length>0&&e.jsxs("div",{className:"bg-orange-100 dark:bg-orange-800 p-4 sm:p-6 rounded-lg shadow-md border border-orange-200 dark:border-orange-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-orange-800 dark:text-orange-100 mb-2",children:["Cursos Pendientes (",s.pendingCourses.length,")"]}),e.jsx(H,{className:"text-3xl text-orange-500 dark:text-orange-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-orange-700 dark:text-orange-200 space-y-1",children:[s.pendingCourses.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/admin/courses/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)),s.pendingCourses.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/admin/courses"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más..."})})]})]}),s.pendingDocs.length>0&&e.jsxs("div",{className:"bg-teal-100 dark:bg-teal-800 p-4 sm:p-6 rounded-lg shadow-md border border-teal-200 dark:border-teal-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-teal-800 dark:text-teal-100 mb-2",children:["Documentos Pendientes (",s.pendingDocs.length,")"]}),e.jsx(W,{className:"text-3xl text-teal-500 dark:text-teal-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-teal-700 dark:text-teal-200 space-y-1",children:[s.pendingDocs.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/admin/documentation/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)),s.pendingDocs.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/admin/documentation"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más..."})})]})]}),s.pendingForumPosts.length>0&&e.jsxs("div",{className:"bg-cyan-100 dark:bg-cyan-800 p-4 sm:p-6 rounded-lg shadow-md border border-cyan-200 dark:border-cyan-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-800 dark:text-cyan-100 mb-2",children:["Posts de Foro Pendientes (",s.pendingForumPosts.length,")"]}),e.jsx(q,{className:"text-3xl text-cyan-500 dark:text-cyan-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-cyan-700 dark:text-cyan-200 space-y-1",children:[s.pendingForumPosts.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/admin/forums-management/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)),s.pendingForumPosts.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/admin/forums-management"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más..."})})]})]}),s.commentsNeedingApproval.length>0&&e.jsxs("div",{className:"bg-lime-100 dark:bg-lime-800 p-4 sm:p-6 rounded-lg shadow-md border border-lime-200 dark:border-lime-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-lime-800 dark:text-lime-100 mb-2",children:["Comentarios Pendientes (",s.commentsNeedingApproval.length,")"]}),e.jsx(J,{className:"text-3xl text-lime-500 dark:text-lime-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-lime-700 dark:text-lime-200 space-y-1",children:[s.commentsNeedingApproval.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r("/admin/forums-management"),className:"text-accent-primary hover:underline cursor-pointer",children:['"',t.content?t.content.substring(0,20):"[Sin contenido]",'..."']})},t._id)),s.commentsNeedingApproval.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/admin/forums-management"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más..."})})]})]}),s.pendingConferences.length>0&&e.jsxs("div",{className:"bg-fuchsia-100 dark:bg-fuchsia-800 p-4 sm:p-6 rounded-lg shadow-md border border-fuchsia-200 dark:border-fuchsia-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-fuchsia-800 dark:text-fuchsia-100 mb-2",children:["Congresos Pendientes (",s.pendingConferences.length,")"]}),e.jsx(K,{className:"text-3xl text-fuchsia-500 dark:text-fuchsia-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-fuchsia-700 dark:text-fuchsia-200 space-y-1",children:[s.pendingConferences.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/admin/conferences/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)),s.pendingConferences.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/admin/conferences"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más..."})})]})]}),s.pendingCourses.length===0&&s.pendingDocs.length===0&&s.pendingForumPosts.length===0&&s.commentsNeedingApproval.length===0&&s.pendingConferences.length===0&&e.jsx("p",{className:"text-text-secondary col-span-full text-center",children:"No hay contenido pendiente de aprobación."})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary mt-8",children:"Gestión Rápida"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/users"),children:"Gestionar Usuarios"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/courses"),children:"Gestionar Cursos"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/documentation"),children:"Gestionar Documentos"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/forums-management"),children:"Gestionar Foros"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/conferences"),children:"Gestionar Congresos"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/subjects"),children:"Gestionar Materias"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/niveles"),children:"Gestionar Niveles"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/covers"),children:"Gestionar Portadas"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/facultades"),children:"Gestionar Facultades"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/carreras"),children:"Gestionar Carreras"}),e.jsx(i,{variant:"secondary",className:"w-full",onClick:()=>r("/admin/subject-areas"),children:"Gestionar Áreas Temáticas"})]})]})]})})},se=()=>{const r=F(),{user:n,loading:o}=A(),[s,h]=m.useState(null),[y,x]=m.useState(!0),[u,p]=m.useState(null);return m.useEffect(()=>{(async()=>{if(o||!n){x(!1);return}try{x(!0);const c=await G.getCourses(),b=await $.getAll(),j=await V.getForumPosts(),f=await z.getConferences(),v=await T.getComments(),k=c.filter(a=>a.author&&a.author._id===n.id),C=k.filter(a=>!a.isApproved),w=b.filter(a=>a.author&&a.author._id===n.id),P=w.filter(a=>!a.isApproved),g=j.filter(a=>a.author&&a.author._id===n.id),D=g.filter(a=>!a.isApproved),N=f.filter(a=>a.organizer&&a.organizer._id===n.id),d=N.filter(a=>!a.isApproved),E=v.filter(a=>g.some(I=>I._id===a.forumPost));h({myCourses:k,myPendingCourses:C,myDocs:w,myPendingDocs:P,myForumPosts:g,myPendingForumPosts:D,myConferences:N,myPendingConferences:d,commentsOnMyPosts:E}),p(null)}catch(c){console.error("Error fetching teacher dashboard data:",c),p("Could not load dashboard data. Please try again later."),L.error("Error loading dashboard data.")}finally{x(!1)}})()},[o,n]),o||y?e.jsxs("div",{className:"pt-20 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:[e.jsx(_,{}),e.jsx("p",{className:"mt-4",children:"Cargando datos del dashboard..."})]}):u?e.jsxs("div",{className:"pt-20 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-lg",children:u})]}):e.jsx("div",{className:"mt-28 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 text-center w-full",children:"Dashboard de Profesor"}),s&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"Mi Contenido"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-800 p-4 sm:p-6 rounded-lg shadow-md border border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-blue-800 dark:text-blue-100 mb-2",children:["Mis Cursos (",s.myCourses.length,")"]}),e.jsx(S,{className:"text-3xl text-blue-500 dark:text-blue-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 dark:text-blue-200 space-y-1",children:[s.myCourses.length>0?s.myCourses.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/admin/courses/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:[t.title," (",t.isApproved?"Aprobado":"Pendiente",")"]})},t._id)):e.jsx("li",{children:"No has creado cursos aún."}),s.myCourses.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/teacher/my-courses"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos mis cursos..."})})]})]}),e.jsxs("div",{className:"bg-green-100 dark:bg-green-800 p-4 sm:p-6 rounded-lg shadow-md border border-green-200 dark:border-green-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-green-800 dark:text-green-100 mb-2",children:["Mi Documentación (",s.myDocs.length,")"]}),e.jsx(M,{className:"text-3xl text-green-500 dark:text-green-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-green-700 dark:text-green-200 space-y-1",children:[s.myDocs.length>0?s.myDocs.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/admin/documentation/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:[t.title," (",t.isApproved?"Aprobado":"Pendiente",")"]})},t._id)):e.jsx("li",{children:"No has creado documentos aún."}),s.myDocs.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/teacher/my-documentation"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver toda mi documentación..."})})]})]}),e.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-800 p-4 sm:p-6 rounded-lg shadow-md border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-yellow-800 dark:text-yellow-100 mb-2",children:["Mis Posts en Foro (",s.myForumPosts.length,")"]}),e.jsx(R,{className:"text-3xl text-yellow-500 dark:text-yellow-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-yellow-700 dark:text-yellow-200 space-y-1",children:[s.myForumPosts.length>0?s.myForumPosts.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/admin/forums-management/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:[t.title," (",t.isApproved?"Aprobado":"Pendiente",")"]})},t._id)):e.jsx("li",{children:"No has creado posts en el foro aún."}),s.myForumPosts.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/teacher/my-forum-posts"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos mis posts..."})})]})]}),e.jsxs("div",{className:"bg-purple-100 dark:bg-purple-800 p-4 sm:p-6 rounded-lg shadow-md border border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-purple-800 dark:text-purple-100 mb-2",children:["Mis Congresos (",s.myConferences.length,")"]}),e.jsx(U,{className:"text-3xl text-purple-500 dark:text-purple-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-purple-700 dark:text-purple-200 space-y-1",children:[s.myConferences.length>0?s.myConferences.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/admin/conferences/edit/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:[t.title," (",t.isApproved?"Aprobado":"Pendiente",")"]})},t._id)):e.jsx("li",{children:"No has organizado congresos aún."}),s.myConferences.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/teacher/my-conferences"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos mis congresos..."})})]})]}),s.commentsOnMyPosts.length>0&&e.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-800 p-4 sm:p-6 rounded-lg shadow-md border border-indigo-200 dark:border-indigo-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-indigo-800 dark:text-indigo-100 mb-2",children:["Comentarios en Mis Posts (",s.commentsOnMyPosts.length,")"]}),e.jsx(O,{className:"text-3xl text-indigo-500 dark:text-indigo-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-indigo-700 dark:text-indigo-200 space-y-1",children:[s.commentsOnMyPosts.slice(0,5).map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/admin/forums-management/edit/${t.forumPost._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:['"',t.content?.substring(0,30)||"",'..." (',t.isApproved?"Aprobado":"Pendiente",")"]})},t._id)),s.commentsOnMyPosts.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/teacher/my-forum-posts"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos los comentarios..."})})]})]})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary mt-8",children:"Acciones Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{variant:"primary",className:"w-full cursor-pointer",onClick:()=>r("/admin/courses/create"),children:"Crear Nuevo Curso"}),e.jsx(i,{variant:"primary",className:"w-full cursor-pointer",onClick:()=>r("/admin/documentation/create"),children:"Subir Nuevo Documento"}),e.jsx(i,{variant:"primary",className:"w-full cursor-pointer",onClick:()=>r("/admin/conferences/create"),children:"Organizar Nuevo Congreso"}),e.jsx(i,{variant:"primary",className:"w-full cursor-pointer",onClick:()=>r("/forums"),children:"Ir al Foro"})]})]})]})})};function te(r){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M203.97 23l-18.032 4.844 11.656 43.468c-25.837 8.076-50.32 21.653-71.594 40.75L94.53 80.594l-13.218 13.22 31.376 31.374c-19.467 21.125-33.414 45.53-41.813 71.343l-42.313-11.343-4.843 18.063 42.25 11.313c-6.057 27.3-6.157 55.656-.345 83L23.72 308.78l4.843 18.064 41.812-11.22c6.693 21.225 17.114 41.525 31.25 59.876l-29.97 52.688-16.81 29.593 29.56-16.842 52.657-29.97c18.41 14.216 38.784 24.69 60.094 31.407l-11.22 41.844 18.033 4.81 11.218-41.905c27.345 5.808 55.698 5.686 83-.375l11.312 42.28 18.063-4.81-11.344-42.376c25.812-8.4 50.217-22.315 71.342-41.78l31.375 31.373 13.22-13.218-31.47-31.47c19.09-21.266 32.643-45.738 40.72-71.563l43.53 11.657 4.813-18.063-43.625-11.686c5.68-27.044 5.576-55.06-.344-82.063l43.97-11.78-4.813-18.063L440.908 197c-6.73-20.866-17.08-40.79-31.032-58.844l29.97-52.656 16.842-29.563-29.593 16.844-52.656 29.97c-17.998-13.875-37.874-24.198-58.657-30.906l11.783-44L309.5 23l-11.78 43.97c-27-5.925-55.02-6.05-82.064-.376L203.97 23zm201.56 85L297.25 298.313l-.75.437-40.844-40.875-148.72 148.72-2.186 1.25 109.125-191.75 41.78 41.78L405.532 108zm-149.686 10.594c21.858 0 43.717 5.166 63.594 15.47l-116.625 66.342-2.22 1.28-1.28 2.22-66.25 116.406c-26.942-52.04-18.616-117.603 25.03-161.25 26.99-26.988 62.38-40.468 97.75-40.468zm122.72 74.594c26.994 52.054 18.67 117.672-25.002 161.343-43.66 43.662-109.263 52.005-161.312 25.033l116.438-66.282 2.25-1.25 1.25-2.25 66.375-116.592z"},child:[]}]})(r)}const re=()=>{const r=F(),{user:n,loading:o}=A(),[s,h]=m.useState(null),[y,x]=m.useState(!0),[u,p]=m.useState(null);return m.useEffect(()=>{(async()=>{if(o||!n){x(!1);return}try{x(!0);const c=await G.getCourses(),b=await $.getAll(),j=await V.getForumPosts(),f=await z.getConferences(),v=await T.getComments(),C=(await Z.getEnrollments(n.id)).map(l=>l.course._id),P=c.filter(l=>C.includes(l._id)).map(l=>({...l,progress:Math.floor(Math.random()*100)})),g=b.filter(l=>l.isApproved),D=f.filter(l=>l.isApproved&&new Date(l.date)>new Date),N=j.filter(l=>l.author&&l.author._id===n.id&&l.isApproved),d=v.filter(l=>l.author&&l.author._id===n.id&&l.isApproved),E={enrolledCourses:P,recentDocuments:g.slice(0,3),upcomingEvents:D.slice(0,3),myRecentForumPosts:N.slice(0,3),myRecentComments:d.slice(0,3)};h(E),p(null)}catch(c){console.error("Error fetching student dashboard data:",c),p("Could not load dashboard data. Please try again later."),L.error("Error loading dashboard data.")}finally{x(!1)}})()},[o,n]),o||y?e.jsxs("div",{className:"pt-20 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:[e.jsx(_,{}),e.jsx("p",{className:"mt-4",children:"Cargando datos del dashboard..."})]}):u?e.jsxs("div",{className:"pt-20 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-lg",children:u})]}):e.jsx("div",{className:"mt-28 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 text-center",children:"Dashboard de Estudiante"}),s&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"Mi Aprendizaje"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-800 p-4 sm:p-6 rounded-lg shadow-md border border-blue-200 dark:border-blue-700 col-span-full",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-blue-800 dark:text-blue-100 mb-2",children:["Cursos Inscritos (",s.enrolledCourses.length,")"]}),e.jsx(S,{className:"text-3xl text-blue-500 dark:text-blue-300"})]}),s.enrolledCourses.length>0?e.jsx("ul",{className:"space-y-4",children:s.enrolledCourses.map(t=>e.jsxs("li",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-blue-50 dark:bg-blue-900 p-3 rounded-md shadow-sm gap-3",children:[e.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-100 mb-2 sm:mb-0 flex-grow",children:t.title}),e.jsxs("div",{className:"w-full sm:w-auto sm:ml-auto flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"w-full sm:w-48 flex items-center gap-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:e.jsx("div",{className:"bg-accent-primary h-2.5 rounded-full",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-300",children:[t.progress,"%"]})]}),e.jsx(i,{variant:"secondary",className:"text-sm py-1 px-3",onClick:()=>r(`/courses/${t._id}`),children:"Continuar"})]})]},t._id))}):e.jsxs("p",{className:"text-blue-700 dark:text-blue-200",children:["No estás inscrito en ningún curso aún. ¡Explora nuestros"," ",e.jsx("a",{onClick:()=>r("/courses"),className:"text-accent-primary hover:underline cursor-pointer",children:"cursos"}),"!"]})]}),e.jsxs("div",{className:"bg-green-100 dark:bg-green-800 p-4 sm:p-6 rounded-lg shadow-md border border-green-200 dark:border-green-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-green-800 dark:text-green-100 mb-2",children:["Documentos Recientes (",s.recentDocuments.length,")"]}),e.jsx(M,{className:"text-3xl text-green-500 dark:text-green-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-green-700 dark:text-green-200 space-y-1",children:[s.recentDocuments.length>0?s.recentDocuments.map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/documentation/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)):e.jsx("li",{children:"No hay documentos recientes."}),s.recentDocuments.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/documentation"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más documentos..."})})]})]}),e.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-800 p-4 sm:p-6 rounded-lg shadow-md border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-yellow-800 dark:text-yellow-100 mb-2",children:["Próximos Eventos (",s.upcomingEvents.length,")"]}),e.jsx(X,{className:"text-3xl text-yellow-500 dark:text-yellow-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-yellow-700 dark:text-yellow-200 space-y-1",children:[s.upcomingEvents.length>0?s.upcomingEvents.map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/events/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:[t.title," (",new Date(t.date).toLocaleDateString(),")"]})},t._id)):e.jsx("li",{children:"No hay eventos próximos."}),s.upcomingEvents.length>5&&e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/events"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver más eventos..."})})]})]}),e.jsxs("div",{className:"bg-purple-100 dark:bg-purple-800 p-4 sm:p-6 rounded-lg shadow-md border border-purple-200 dark:border-purple-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-purple-800 dark:text-purple-100 mb-2",children:["Mi Actividad Reciente en Foro (",s.myRecentForumPosts.length,")"]}),e.jsx(R,{className:"text-3xl text-purple-500 dark:text-purple-300"})]}),e.jsx("ul",{className:"list-disc list-inside text-purple-700 dark:text-purple-200 space-y-1",children:s.myRecentForumPosts.length>0?s.myRecentForumPosts.map(t=>e.jsx("li",{className:"truncate",children:e.jsx("a",{onClick:()=>r(`/forums/${t._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:t.title})},t._id)):e.jsx("li",{children:"No has creado posts recientemente."})})]}),e.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-800 p-4 sm:p-6 rounded-lg shadow-md border border-indigo-200 dark:border-indigo-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-indigo-800 dark:text-indigo-100 mb-2",children:["Mis Comentarios Recientes (",s.myRecentComments.length,")"]}),e.jsx(O,{className:"text-3xl text-indigo-500 dark:text-indigo-300"})]}),e.jsx("ul",{className:"list-disc list-inside text-indigo-700 dark:text-indigo-200 space-y-1",children:s.myRecentComments.length>0?s.myRecentComments.map(t=>e.jsx("li",{className:"truncate",children:e.jsxs("a",{onClick:()=>r(`/forums/${t.forumPost._id}`),className:"text-accent-primary hover:underline cursor-pointer",children:['"',t.content?.substring(0,30)||"",'..."']})},t._id)):e.jsx("li",{children:"No has hecho comentarios recientemente."})})]}),e.jsxs("div",{className:"bg-pink-100 dark:bg-pink-800 p-4 sm:p-6 rounded-lg shadow-md border border-pink-200 dark:border-pink-700",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-pink-800 dark:text-pink-100 mb-2",children:"Explorar y Descubrir"}),e.jsx(te,{className:"text-3xl text-pink-500 dark:text-pink-300"})]}),e.jsxs("ul",{className:"list-disc list-inside text-pink-700 dark:text-pink-200 space-y-1",children:[e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/courses"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos los cursos"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/documentation"),className:"text-accent-primary hover:underline cursor-pointer",children:"Explorar documentación"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/forums"),className:"text-accent-primary hover:underline cursor-pointer",children:"Participar en foros"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>r("/events"),className:"text-accent-primary hover:underline cursor-pointer",children:"Ver todos los eventos"})})]})]})]})]})]})})},he=()=>{const r=F(),{user:n,loading:o,isAuthenticated:s,hasRole:h}=A();return o?e.jsxs("div",{className:"pt-20 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:[e.jsx(_,{}),e.jsx("p",{className:"mt-4",children:"Cargando..."})]}):!s||n.role==="guest"?e.jsxs("div",{className:"mt-28 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Acceso Denegado"}),e.jsx("p",{className:"text-lg mb-6",children:"Por favor, inicia sesión para ver tu dashboard."}),e.jsx(i,{variant:"primary",onClick:()=>r("/login"),className:"w-full max-w-xs",children:"Iniciar Sesión"})]}):h(["admin"])?e.jsx(ee,{}):h(["teacher"])?e.jsx(se,{}):h(["student"])?e.jsx(re,{}):e.jsxs("div",{className:"mt-28 p-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-red-500",children:"Error de Rol"}),e.jsx("p",{className:"text-lg",children:"Tu rol de usuario no es válido para mostrar un dashboard."})]})};export{he as default};
