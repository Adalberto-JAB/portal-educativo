import{u as x,r as t,j as e,L as d,o as u,c as h,p as f,e as p}from"./index-CDtZe3id.js";import{f as j}from"./forumService-DfOgb0S1.js";import{C as N}from"./CustomButton-BHk0TsfB.js";const b=()=>{const r=x(),[c,i]=t.useState([]),[l,n]=t.useState(!0),[o,m]=t.useState(null);return t.useEffect(()=>{(async()=>{try{n(!0);const a=await j.getForumPosts();i(a)}catch(a){m("No se pudieron cargar los posts del foro."),console.error("Error fetching forum posts:",a)}finally{n(!1)}})()},[]),l?e.jsx("div",{className:"pt-20 flex justify-center items-center min-h-screen",children:e.jsx(d,{})}):o?e.jsx("div",{className:"pt-20 text-center text-red-500",children:e.jsx("p",{children:o})}):e.jsx("div",{className:"mt-28 p-8 min-h-screen bg-bg-primary text-text-primary",children:e.jsx("div",{className:"max-w-[1024px] mx-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Foros de Discusión"}),e.jsx("p",{className:"text-lg text-text-secondary mb-4 text-start",children:"Participa en discusiones, haz preguntas y comparte conocimientos."}),e.jsx("div",{className:"flex justify-end-safe mb-8",children:e.jsx(N,{variant:"primary",onClick:()=>r("/forums/create"),children:"Crear Nuevo Post"})}),e.jsx("div",{className:"space-y-6",children:c.length>0?c.map(s=>e.jsxs("div",{className:"bg-bg-secondary p-6 rounded-lg shadow-md border border-border-color hover:border-accent-primary transition-colors duration-300 cursor-pointer",onClick:()=>r(`/forums/${s._id}`),children:[e.jsx("h2",{className:"text-2xl font-bold text-accent-primary mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center text-sm text-text-secondary gap-x-4 gap-y-1 mb-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(u,{className:"mr-2"})," ",s.author?`${s.author.name} ${s.author.last_name}`:"Anónimo"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(h,{className:"mr-2"})," ",s.subject?.name||"Materia no especificada"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(f,{className:"mr-2"})," ",new Date(s.createdAt).toLocaleDateString("es-ES")]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"mr-2"})," ",s.commentsCount||0," Comentarios"]})]}),e.jsx("p",{className:"text-text-primary truncate",children:s.content})]},s._id)):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-text-secondary text-xl",children:"No hay posts en el foro todavía. ¡Sé el primero en crear uno!"})})})]})})})};export{b as default};
