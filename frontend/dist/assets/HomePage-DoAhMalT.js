import{A as j,u as L,r as t,y,j as e,L as N}from"./index-CDtZe3id.js";import{C as w}from"./CustomButton-BHk0TsfB.js";const v={getHistoricalFactsForWeek:async(a,r)=>{try{return(await j.get(`/history/week/${a}/${r}`)).data}catch(c){throw console.error(`Error fetching historical facts for week starting ${a}/${r}:`,c),c}},getHolidays:async a=>{try{return(await j.get(`/holidays/${a}`)).data}catch(r){throw console.error(`Error fetching holidays for year ${a}:`,r),r}}},M=()=>{const a=L(),[r,c]=t.useState([]),[h,H]=t.useState([]),[E,m]=t.useState(!0),[D,x]=t.useState(!0),[p,g]=t.useState(null),[u,f]=t.useState(null),[F,S]=t.useState(""),b=t.useCallback(async()=>{const s=new Date,o=s.getMonth()+1,d=s.getDate(),n=s.getFullYear(),i=new Date(s);i.setDate(s.getDate()+6),S(`del ${s.getDate()} de ${s.toLocaleString("es-ES",{month:"long"})} al ${i.getDate()} de ${i.toLocaleString("es-ES",{month:"long"})}`),m(!0);try{const $=(await v.getHolidays(n)).filter(k=>new Date(k.fecha).getMonth()+1===o);c($),g(null)}catch(l){console.error("Error fetching holidays:",l),g("No se pudieron cargar los feriados."),y.error("Error al cargar los feriados.")}finally{m(!1)}x(!0);try{const l=await v.getHistoricalFactsForWeek(o,d);H(l),f(null)}catch(l){console.error("Error fetching historical facts:",l),f("No se pudieron cargar los hechos históricos."),y.error("Error al cargar los hechos históricos.")}finally{x(!1)}},[]);return t.useEffect(()=>{b()},[b]),e.jsx("div",{className:"mt-32 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] p-4 bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-4 md:mb-12 text-center",children:"¡Bienvenido al Portal Educativo!"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-center mb-8 md:mb-12",children:"Tu plataforma integral para el aprendizaje y desarrollo."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 sm:justify-center md:mb-12",children:[e.jsx(w,{variant:"primary",onClick:()=>a("/courses"),children:"Explorar Cursos"}),e.jsx(w,{variant:"secondary",onClick:()=>a("/register"),children:"Registrarse"})]}),e.jsxs("div",{className:"w-full max-w-4xl space-y-8",children:[e.jsxs("div",{className:"bg-bg-secondary p-4 md:p-6 rounded-lg shadow-md border border-border-color",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:"Feriados del Mes"}),E?e.jsx(N,{}):p?e.jsxs("p",{className:"text-red-500",children:["Error: ",p]}):r.length===0?e.jsx("p",{children:"No hay feriados este mes."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-color",children:[e.jsx("th",{className:"p-3 md:p-4",children:"Fecha"}),e.jsx("th",{className:"p-3 md:p-4",children:"Descripción"})]})}),e.jsx("tbody",{children:r.map((s,o)=>e.jsxs("tr",{className:"border-b border-border-color",children:[e.jsx("td",{className:"p-3 md:p-4 align-top font-medium whitespace-nowrap",children:new Date(s.fecha).toLocaleDateString("es-AR",{day:"numeric",month:"long"})}),e.jsx("td",{className:"p-3 md:p-4",children:s.nombre})]},o))})]})})]}),e.jsxs("div",{className:"bg-bg-secondary p-4 md:p-6 rounded-lg shadow-md border border-border-color",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:["Hechos Históricos de la Semana ",F]}),D?e.jsx(N,{}):u?e.jsxs("p",{className:"text-red-500",children:["Error: ",u]}):h.length===0?e.jsx("p",{children:"No hay hechos históricos registrados para esta semana."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-color",children:[e.jsx("th",{className:"p-3 md:p-4",children:"Fecha"}),e.jsx("th",{className:"p-3 md:p-4",children:"Acontecimientos"})]})}),e.jsx("tbody",{children:h.map((s,o)=>e.jsxs("tr",{className:"border-b border-border-color",children:[e.jsx("td",{className:"p-3 md:p-4 align-top font-semibold whitespace-nowrap",children:s.date}),e.jsx("td",{className:"p-3 md:p-4",children:e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:s.facts.map((d,n)=>e.jsx("li",{children:d},n))})})]},o))})]})})]})]})]})})};export{M as default};
