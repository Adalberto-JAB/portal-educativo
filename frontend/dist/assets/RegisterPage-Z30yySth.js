import{u as k,a as q,r as d,j as e,L as u}from"./index-CDtZe3id.js";import{C as v}from"./CustomButton-BHk0TsfB.js";import{u as E}from"./index.esm-CYe7NKTW.js";import{o as C,c as _,a,b as F}from"./index.esm-DVNFl3iM.js";import{g as U,a as $}from"./avatarApiUtil-DtOOGbiP.js";const y=t=>{let l=t.length,n;for(;l!==0;)n=Math.floor(Math.random()*l),l--,[t[l],t[n]]=[t[n],t[l]];return t},D=_().shape({name:a().required("El nombre es requerido").min(2,"El nombre debe tener al menos 2 caracteres"),last_name:a().required("El apellido es requerido").min(2,"El apellido debe tener al menos 2 caracteres"),email:a().email("Formato de email inválido").required("El email es requerido"),password:a().required("La contraseña es requerida").min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:a().oneOf([F("password"),null],"Las contraseñas deben coincidir").required("Confirmar contraseña es requerido"),phoneNumber:a().nullable(),address:a().nullable(),profilePictureURL:a().required("Debes seleccionar un avatar")}),z=()=>{const t=k(),{register:l}=q(),[n,b]=d.useState(!1),[c,m]=d.useState(!0),[x,w]=d.useState(""),[A,f]=d.useState([]),[h,g]=d.useState(""),{register:o,handleSubmit:R,formState:{errors:r},setValue:p,trigger:P}=E({resolver:C(D),defaultValues:{name:"",last_name:"",email:"",password:"",confirmPassword:"",phoneNumber:"",address:"",profilePictureURL:""}});d.useEffect(()=>{(async()=>{m(!0);const{defaultAvatar:i,randomAvatars:N}=U();w(i),f(y(N)),g(i),p("profilePictureURL",i),m(!1)})()},[p]);const j=s=>{g(s),p("profilePictureURL",s,{shouldValidate:!0}),P("profilePictureURL")},L=()=>{m(!0);const s=$();f(y(s)),m(!1)},S=async s=>{b(!0);try{const i={name:s.name,last_name:s.last_name,email:s.email,password:s.password,phoneNumber:s.phoneNumber,address:s.address,profilePictureURL:s.profilePictureURL,role:"student"};await l(i)&&t("/login")}catch(i){console.error("Error registering user:",i)}finally{b(!1)}};return e.jsx("div",{className:"mt-28 p-4 sm:p-6 md:p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary flex items-center justify-center",children:e.jsxs("div",{className:"bg-bg-secondary p-6 sm:p-8 rounded-lg shadow-lg w-full max-w-2xl border border-border-color",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 text-center",children:"Registro de Usuario"}),e.jsxs("form",{onSubmit:R(S),className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"name",children:"Nombre:"}),e.jsx("input",{type:"text",id:"name",...o("name"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"last_name",children:"Apellido:"}),e.jsx("input",{type:"text",id:"last_name",...o("last_name"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.last_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.last_name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",...o("email"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"password",children:"Contraseña:"}),e.jsx("input",{type:"password",id:"password",...o("password"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirmar Contraseña:"}),e.jsx("input",{type:"password",id:"confirmPassword",...o("confirmPassword"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.confirmPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"phoneNumber",children:"Número de Teléfono (Opcional):"}),e.jsx("input",{type:"text",id:"phoneNumber",...o("phoneNumber"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.phoneNumber&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.phoneNumber.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"address",children:"Dirección (Opcional):"}),e.jsx("input",{type:"text",id:"address",...o("address"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),r.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.address.message})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",children:"Elige tu Avatar:"}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Avatar por defecto"}),e.jsx("img",{src:x,alt:"Avatar por defecto",className:`w-20 h-20 sm:w-24 sm:h-24 rounded-full cursor-pointer p-1 bg-gray-700 ${h===x?"ring-4 ring-accent-primary":""}`,onClick:()=>j(x)})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(v,{variant:"secondary  cursor-pointer",type:"button",onClick:L,disabled:c,children:c?e.jsx(u,{size:"sm"}):"Generar nuevos avatares"})}),c?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(u,{})}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:A.map(s=>e.jsx("img",{src:s,alt:"Avatar aleatorio",className:`w-full h-auto rounded-full cursor-pointer p-1 bg-gray-700 ${h===s?"ring-4 ring-accent-primary":""}`,onClick:()=>j(s)},s))}),r._profilePictureURL&&e.jsx("p",{className:"text-red-500 text-xs mt-2 text-center",children:r.profilePictureURL.message})]}),e.jsx(v,{variant:"primary",type:"submit",disabled:n,className:"w-full mt-4",children:n?e.jsx(u,{}):"Registrarse"})]}),e.jsxs("p",{className:"text-center text-text-secondary text-sm mt-4",children:["¿Ya tienes una cuenta? ",e.jsx("a",{onClick:()=>t("/login"),className:"text-accent-primary hover:underline cursor-pointer",children:"Inicia Sesión"})]})]})})};export{z as default};
