import{u as b,r as a,a as f,j as e,L as g,Q as y,J as N,K as v,y as w}from"./index-CDtZe3id.js";import{g as E,d as C}from"./subjectAreaService-jrsNmA5G.js";import{C as A}from"./CustomButton-BHk0TsfB.js";import{S as c}from"./sweetalert2.esm.all-CH_YVA8w.js";const L=()=>{const n=b(),[l,m]=a.useState([]),[p,r]=a.useState(!0),[o,s]=a.useState(null),{hasRole:h}=f(),i=h(["admin"]),d=async()=>{try{r(!0);const t=await E();m(t),s(null)}catch(t){console.error("Error al obtener las áreas temáticas:",t),s("No se pudieron cargar las áreas temáticas. Por favor, inténtalo de nuevo más tarde."),w.error("Error al cargar las áreas temáticas.")}finally{r(!1)}};a.useEffect(()=>{i?d():(r(!1),s("No tienes permiso para ver esta página."))},[i]);const u=t=>{c.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡eliminar!",cancelButtonText:"Cancelar"}).then(async j=>{if(j.isConfirmed)try{r(!0),await C(t),c.fire("¡Eliminada!","El área temática ha sido eliminada.","success"),d()}catch(x){console.error("Error al eliminar el área temática:",x),c.fire("Error",x.response?.data?.message||"Error al eliminar el área temática.","error")}finally{r(!1)}})};return p?e.jsxs("div",{className:"pt-20 flex flex-col items-center justify-center min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:[e.jsx(g,{}),e.jsx("p",{className:"mt-4",children:"Cargando áreas temáticas..."})]}):o?e.jsxs("div",{className:"pt-20 p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-lg",children:o})]}):i?e.jsx("div",{className:"mt-28 p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-center w-full mb-4",children:"Gestión de Áreas Temáticas"}),e.jsx("div",{className:"flex justify-end-safe mb-8",children:e.jsxs(A,{variant:"primary",onClick:()=>n("/admin/subject-areas/create"),children:[e.jsx(y,{className:"inline-block mr-2"})," Crear Nueva Área"]})}),l.length===0?e.jsx("div",{className:"text-center text-text-secondary",children:e.jsx("p",{children:"No hay áreas temáticas disponibles en este momento."})}):e.jsxs("div",{className:"bg-bg-secondary p-6 rounded-lg shadow-md border border-border-color",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Listado de Áreas Temáticas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border-color",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-bg-secondary divide-y divide-border-color",children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-text-primary",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-text-secondary",children:t.description}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>n(`/admin/subject-areas/edit/${t._id}`),className:"text-accent-primary hover:text-blue-700 mr-4",title:"Editar",children:e.jsx(N,{size:18})}),e.jsx("button",{onClick:()=>u(t._id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx(v,{size:18})})]})]},t._id))})]})})]})]})}):e.jsxs("div",{className:"pt-20 p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-red-500",children:"Acceso Denegado"}),e.jsx("p",{className:"text-lg",children:"No tienes permiso para ver esta página."})]})};export{L as default};
