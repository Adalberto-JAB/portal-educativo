import{u as f,a as g,r as i,j as e,L as y,y as c}from"./index-CDtZe3id.js";import{s as N}from"./subjectService-FmAgODbn.js";import{g as v}from"./subjectAreaService-jrsNmA5G.js";import{C as d}from"./CustomButton-BHk0TsfB.js";import{u as A}from"./index.esm-CYe7NKTW.js";import{o as S,c as w,a as x}from"./index.esm-DVNFl3iM.js";const C=w().shape({name:x().required("El nombre de la materia es requerido"),subjectArea:x().required("El área de conocimiento es requerida")}),R=()=>{const n=f(),{hasRole:u}=g(),[o,l]=i.useState(!1),[b,p]=i.useState([]),{register:m,handleSubmit:j,formState:{errors:t}}=A({resolver:S(C)}),s=u(["admin"]);i.useEffect(()=>{s&&(async()=>{try{const a=await v();p(a)}catch(a){c.error("No se pudieron cargar las áreas de conocimiento."),console.error("Error fetching subject areas:",a)}})()},[s]);const h=async r=>{if(!s){c.error("No tienes permiso para crear materias.");return}try{l(!0),await N.createSubject(r),c.success("Materia creada exitosamente."),n("/admin/subjects")}catch(a){console.error("Error creating subject:",a),c.error(a.response?.data?.message||"Error al crear la materia.")}finally{l(!1)}};return s?e.jsx("div",{className:"mt-28 p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary",children:e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center w-full",children:"Crear Nueva Materia"}),e.jsx("div",{className:"bg-bg-secondary p-8 rounded-lg shadow-lg w-full max-w-md mx-auto border border-border-color",children:e.jsxs("form",{onSubmit:j(h),className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"name",children:"Nombre de la Materia:"}),e.jsx("input",{type:"text",id:"name",...m("name"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border"}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-text-primary text-sm font-bold mb-2",htmlFor:"subjectArea",children:"Área de Conocimiento:"}),e.jsxs("select",{id:"subjectArea",...m("subjectArea"),className:"w-full px-3 py-2 border rounded-md bg-input-bg text-text-primary border-input-border",children:[e.jsx("option",{value:"",children:"Selecciona un área"}),b.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]}),t.subjectArea&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.subjectArea.message})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[e.jsx(d,{variant:"secondary",onClick:()=>n("/admin/subjects"),disabled:o,children:"Cancelar"}),e.jsx(d,{variant:"primary",type:"submit",disabled:o,children:o?e.jsx(y,{}):"Crear Materia"})]})]})})]})}):e.jsxs("div",{className:"pt-20 p-8 min-h-[calc(100vh-80px)] bg-bg-primary text-text-primary text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-red-500",children:"Acceso Denegado"}),e.jsx("p",{className:"text-lg",children:"No tienes permiso para crear materias."})]})};export{R as default};
